{% extends "common/base.html"%}
{% block content %}

    <h1>所有话题</h1>
    <li id="main-nav-entries"><a href="{% url aiteo_question_create %}">新建</a></li>
    <li id="main-nav-entries"><a href="{% url recommend_article %}">阅读文章</a></li>
    {% for question in questions.all %}
    <h4> 
        <a href="question/{{question.id}}">{{ question.question }} <a>
            <span class = "questu" id= {{ question.id}}> {{ question.vote_up_count }} </span> 
            {% load staticfiles %}
            <a href="#"><img class = "buttonup" id = {{question.id}}  src="{% static "aiteo/images.png" %} " alt="up"></a> 
            <a href="#"><img class = "buttondown" id = {{question.id}}  src="{% static "aiteo/images.jpg" %}" alt="down"></a> 
            <span class = "questd" id= "{{ question.id}}d"> {{ question.vote_down_count }} </span> 
            <br/> </h4>
    {% endfor %}
{%endblock%}
{% block scripts%}
<script type="text/javascript">
    $(document).ready(function() {

            $('.buttondown').click(function () {
                var thisobject = $(this);
                var id = thisobject.attr("id");
                var completeurl = "question/vote-question/" + id + "_" + id + "/downvote/";
                $.ajax({
                    type: "POST",
                    url: completeurl,
                    data: "amit",
                    success: function ( response ) {
                        response = $.trim( response );
                        $.ajaxSetup({ cache: false});
                        $(".questd#"+id+"d").html(response);
                        }
                    });
                return false;
                });



            $('.buttonup').click(function () {
<script type="text/javascript">
    $(document).ready(function() {

            $('.buttondown').click(function () {
                var thisobject = $(this);
                var id = thisobject.attr("id");
                var completeurl = "question/vote-question/" + id + "_" + id + "/downvote/";
                $.ajax({
                    type: "POST",
                    url: completeurl,
                    data: "amit",
                    success: function ( response ) {
                        response = $.trim( response );
                        $.ajaxSetup({ cache: false});
                        $(".questd#"+id+"d").html(response);
                        }
                    });
                return false;
                });



            $('.buttonup').click(function () {
                var thisobject = $(this);
                var id = thisobject.attr("id");
                var completeurl = "question/vote-question/" + id + "_" + id + "/upvote/";
                $.ajax({
                    type: "POST",
                    url: completeurl,
                    data: "amit",
                    success: function ( response ) {
                        response = $.trim( response );
                        $.ajaxSetup({ cache: false});
                        $(".questu#"+id).html(response);
                        }
                    });
                return false;
                });


    });

</script>

{%endblock%}

